# üî• BIENVENIDOS AL INFIERNO: Sistema de Gesti√≥n Acad√©mica AMALIA üî•

## ‚ö†Ô∏è ADVERTENCIA CR√çTICA ‚ö†Ô∏è

**SI EST√ÅS LEYENDO ESTO, PROBABLEMENTE HEREDASTE ESTE C√ìDIGO. LO SENTIMOS MUCHO. REALMENTE LO SENTIMOS.**

Este no es un simple sistema de gesti√≥n acad√©mica. Es un campo minado de complejidad, referencias cruzadas, actualizaciones en cascada y suficiente c√≥digo duplicado como para hacer llorar a un senior developer.

##  ¬øQu√© es esta cosa?

AMALIA es un Sistema de Gesti√≥n Acad√©mica desarrollado con PyQt6 y Supabase. Suena simple, ¬øverdad? **MENTIRA.**

Este sistema gestiona:
- ‚úÖ Docentes (que probablemente te culpar√°n si algo falla)
- ‚úÖ Asignaturas (con relaciones que te har√°n cuestionar tu carrera)
- ‚úÖ Calificaciones (con ajustes, porque las notas simples son muy f√°ciles)
- ‚úÖ Grados (con botones expandibles que son un infierno de mantener)
- ‚úÖ Per√≠odos acad√©micos (fechas, porque no hay suficiente complejidad)
- ‚úÖ Historial acad√©mico (con PDF, porque el sufrimiento debe documentarse)

### Lo que NO te dijeron:

- üî• Los estilos CSS est√°n hardcodeados en un string de 400+ l√≠neas
- üî• Los emojis en los botones pueden o no renderizarse seg√∫n el sistema operativo (50/50)

---

##  Tecnolog√≠as (y por qu√© duelen)

### PyQt6
**Por qu√© duele:** Cada widget necesita configuraci√≥n manual. Olv√≠date de hot-reload. Cada cmbaio requiere cerrar y reabrir la app.

### Supabase
**Por qu√© duele:** Si las credenciales cambian, TODO deja de funcionar. Sin rollback. Sin piedad.

### Python 3.8+
**Por qu√© duele:** Tipado din√°mico significa que descubrir√°s errores EN PRODUCCI√ìN.

### Dependencias Cr√≠ticas:
supabase==1.x  # Si actualizas, RUEGA que siga compatible
python-dotenv  # Porque las credenciales NUNCA deben estar en el c√≥digo (pero probablemente lo est√©n)

## Bugs Conocidos (Y los que NO conoces)

1. **Emojis en Botones**
   - En Windows: ‚úÖ Se ven
   - En macOS: ‚úÖ Se ven
   - **Soluci√≥n:** Nadie quiere tocar esto

2. **Estilos CSS Hardcodeados**
   - 400+ l√≠neas de CSS en `setup_ui()`
   - Cambiar un color = buscar en 15 lugares diferentes
   - **Recomendaci√≥n:** Rezar y usar Ctrl+F (Recomendacion real quitarle los estilos te deja un programa manejable)


## üõ°Ô∏è C√≥mo NO Romper Todo

### Reglas de Oro para Sobrevivir:

#### 1Ô∏è‚É£ **NUNCA modifiques `delete_estudiante()` sin leer TODO el m√©todo**
```python
# Este m√©todo actualiza:
# - Tabla principal
# - Vista de grados expandida
# - Botones de grados
# - B√∫squeda de calificaciones
# ¬øOlvidaste uno? COSAS SE ROMPEN
```

#### 2Ô∏è‚É£ **SIEMPRE usa `hasattr()` antes de acceder a widgets din√°micos**
```python
# MAL
self.checkboxes_estudiantes[0].isChecked()

# BIEN
if hasattr(self, 'checkboxes_estudiantes'):
    if self.checkboxes_estudiantes:
        checkbox = self.checkboxes_estudiantes[0]
```

#### 3Ô∏è‚É£ **NO toques el l√≠mite de 50 estudiantes sin implementar paginaci√≥n**
- O todos se quejan
- O el sistema colapsa
- O ambas

#### 4Ô∏è‚É£ **Cuidado con los QTimer**
```python
# Si usas lambdas con variables locales
# COPIA LA VARIABLE PRIMERO
grado_actual = grado_info.copy()  # ‚úÖ
QTimer.singleShot(100, lambda: self.show(grado_actual))
```

#### 5Ô∏è‚É£ **Antes de commitear, prueba:**
- [ ] Crear estudiante
- [ ] Editar estudiante
- [ ] **ELIMINAR estudiante** (el m√°s cr√≠tico)
- [ ] Mover estudiante de grado
- [ ] Mover m√∫ltiples estudiantes
- [ ] Buscar calificaciones

## ‚ùì FAQ (Preguntas Frecuentemente Aterrorizantes)

### P: ¬øPor qu√© hay c√≥digo duplicado?
**R:** Nadie lo sabe. Probablemente un merge conflict que se resolvi√≥ con "aceptar ambos cambios".

### P: ¬øPuedo usar un framework CSS moderno?
**R:** T√©cnicamente s√≠. Pr√°cticamente, tendr√≠as que reescribir TODO el sistema de estilos.

### P: ¬øLos QTimer son necesarios?
**R:** S√≠. PyQt6 a veces necesita "respirar" entre operaciones de UI. Sin ellos, las actualizaciones no se reflejan.

### P: ¬øQu√© pasa si Supabase cambia su API?
**R:** üî•üî•üî• TODO EXPLOTA üî•üî•üî•

### P: ¬øHay tests?
**R:** JAJAJAJAJAJA... no.

### P: ¬øDocumentaci√≥n adicional?
**R:** Este README es todo lo que hay. Y los comentarios en el c√≥digo.

### P: ¬øPuedo refactorizar esto?
**R:** Puedes. Pero cada cambio tiene el potencial de romper 3 cosas m√°s. Procede con extrema precauci√≥n.

---

##  Consejos de Supervivencia

### 1. **Usa Git religiosamente**
```bash
git commit -m "Funcionaba antes de este cambio"
```

### 2. **Mant√©n copias de seguridad de la BD**
Supabase puede ser tu amigo o tu peor enemigo.

### 3. **Documenta TODO cambio**
```python
# NOTA: Agregu√© este try-except porque el sistema explotaba
# cuando el usuario presionaba Escape en el di√°logo
# Fecha: 2025-01-25
# Autor: [Tu nombre aqu√≠, para que te culpen despu√©s]
```

### 4. **Aprende a depurar con prints**
PyQt6 no tiene un debugger amigable. Los prints son tu mejor amigo

### 5. **No asumas NADA**
- ¬øEse widget existe? Verifica con `hasattr()`
- ¬øEsa lista tiene elementos? Verifica con `if lista:`
- ¬øEse diccionario tiene esa clave? Usa `.get()`

### 6. **Mant√©n un diario de cambios**
```markdown
## 2025-01-25
- Arregl√© el bug de los checkboxes
- ROMP√ç la actualizaci√≥n de grados
- Pas√© 3 horas debuggeando
- Finalmente funcion√≥
- No s√© por qu√©
```

### 7. **Conoce las partes cr√≠ticas**

**üü° ZONA DE PRECAUCI√ìN:**
- Cualquier funci√≥n `load_*()` - Recargan datos completos
- Cualquier funci√≥n `filter_*()` - Iteran sobre TODAS las filas
- `perform_search()` - Tiene un timer de por medio

## üéì Lecciones Aprendidas (de la manera dif√≠cil)

1. **PyQt6 no actualiza autom√°ticamente**
   - Debes llamar expl√≠citamente a `update()`, `repaint()`, o recargar widgets

2. **Los lambdas en QTimer son peligrosas**
   - Capturan referencias, no valores
   - Usa `.copy()` o variables locales

3. **No conf√≠es en que los widgets existen**
   - Usa `hasattr()` SIEMPRE

4. **El CSS inline es un infierno**
   - Pero cambiarlo ahora romper√≠a TODO

5. **La documentaci√≥n es cr√≠tica**
   - Este README existe porque sufrimos

---

## üöÄ Si vas a extender el sistema...

### Para agregar una nueva entidad (ej: "Cursos"):

1. **Crea la tabla en Supabase** ‚úÖ
2. **Agrega m√©todos en `supabase_client.py`** ‚úÖ
```python
   def get_all_cursos(self)
   def add_curso(self, data)
   def update_curso(self, id, data)
   def delete_curso(self, id)
```

3. **Crea un di√°logo en `models/dialogs.py`** ‚úÖ
```python
   class CursoDialog(QDialog):
       # Copia la estructura de EstudianteDialog
```

4. **Agrega pesta√±a en `main_window.py`** ‚úÖ
```python
   def create_cursos_tab(self):
       # Copia la estructura de create_estudiantes_tab()
```

5. **Implementa las funciones CRUD** ‚úÖ
```python
   def add_curso(self)
   def edit_curso(self, curso)
   def delete_curso(self, id)
   def load_cursos(self)
```

6. **REZA para que funcione** 

## Soporte (o falta de √©l)

**¬øTienes un bug?**
1. Verifica que no est√© en la lista de "Bugs Conocidos"
2. Agrega `print()` statements EVERYWHERE
3. Lee el stack trace completo
4. Google es tu amigo
5. Stack Overflow es tu salvador
6. Si nada funciona, llora un poco
7. Luego vuelve al paso 2

**¬øQuieres contactar al desarrollador original?**
- Buena suerte con eso.


##  Palabras Finales

Este c√≥digo es como una torre de Jenga: cada pieza sostiene a tres m√°s. Retira la pieza equivocada y todo colapsa.

**Pero aqu√≠ est√°s**, leyendo este README, probablemente porque:
- Te asignaron mantener esto
- Heredaste este proyecto
- Eres el nuevo "el que sabe de programaci√≥n"
- Cometiste alg√∫n pecado en una vida pasada

Sea cual sea la raz√≥n, **bienvenido al equipo**. 

Somos sobrevivientes. Somos guerreros. Somos los que mantienen vivo este c√≥digo contra todo pron√≥stico.

**Cuando te toque pasarle esto a alguien m√°s, actualiza este README.**

A√±ade tus propias batallas. Documenta tus propias pesadillas. Y sobre todo, s√© honesto sobre las atrocidades que cometiste para hacer que "funcionara".

Porque el pr√≥ximo desarrollador te lo agradecer√°.

O al menos sabr√° a qu√© se enfrenta.

---

## üìú Licencia

**Licencia de Sufrimiento Compartido (LSC) v1.0**

Se permite:
- Usar este c√≥digo
- Modificar este c√≥digo
- Llorar por este c√≥digo
- Maldecir este c√≥digo

Se proh√≠be:
- Culpar al pr√≥ximo mantenedor
- No documentar tus cambios
- Asumir que "funciona en mi m√°quina" es suficiente
- Eliminar este README

---
## Crear Ejecutable utilizando Pyinstaller
python -m PyInstaller --onefile --noconsole --add-data "assets/escudo.png;assets" --add-data "assets/style.qss;assets" --add-data "assets;assets" --add-data "database;database" --add-data "models;models" --add-data "ui;ui" --add-data ".env;." --hidden-import=pkgutil --hidden-import=pkg_resources --hidden-import=setuptools --hidden-import=os --hidden-import=sys --hidden-import=io --hidden-import=importlib --hidden-import=importlib.metadata --hidden-import=importlib.resources --hidden-import=PyQt6.QtCore --hidden-import=PyQt6.QtGui --hidden-import=PyQt6.QtWidgets --hidden-import=PyQt6.sip --hidden-import=PyQt6.QtSvg --hidden-import=dotenv --hidden-import=psycopg2 --hidden-import=psycopg2._psycopg --hidden-import=psycopg2.extensions --hidden-import=supabase --collect-all supabase --clean main.py

**√öltima actualizaci√≥n:** 25 de Enero, 2026
**√öltima vez que todo funcion√≥ simult√°neamente:** ¬øAlguna vez?


**¬°BUENA SUERTE! ¬°LA VAS A NECESITAR!** 

*"En este c√≥digo, no hay errores. Solo caracter√≠sticas que a√∫n no entendemos."*
*- Desarrollador An√≥nimo, probablemente llorando*

**Esto es una broma y esta muy exagerado**
